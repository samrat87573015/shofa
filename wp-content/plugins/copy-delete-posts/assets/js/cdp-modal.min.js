jQuery(document).ready(function(o){o("#cdp-purl").val();let t="default";function e(){o.cdpModal("cdp-copy-modal-global");let t=o(".cdp-modal-input-profiles-r").val();o('[name="tooltip-which-profile-second-modal"]').val(t),o('.cdp-input-dynamic[name="tooltip-which-profile-second-modal"]').trigger("change")}function c(){if(o("#cdp-current-post-id").length>0)return[o("#cdp-current-post-id").val()];$rows=o("#the-list").find("tr"),$ids=[];for(var t=0;t<$rows.length;t++){let e=o($rows[t]);e.find('input[name="post[]"]').is(":checked")&&$ids.push(e.find('input[name="post[]"]').attr("value"))}return $ids}function n(t=(()=>{})){window.onbeforeunload=null,$e=o(".cdp-copy-loader-overlay"),$e.is(":hidden")||$e.animate({opacity:0},300,function(){$e.hide(),t(!0)})}o(".cdp-admin-bar-copy").on("click",e),o("body").on("click",".cdp-editor-gutenberg-copy",e),o("body").on("click",".cdp-copy-btn-editor",e),o("body").on("click",".cdp-copy-modal-button",function(){let e=o(this).attr("data-cdp-btn"),i=["copy-quick","copy-custom","copy-custom-link"];if(i.includes(e)){let d={type:e},p=c(),l=o(".cdp-modal-checkboxes").find(".cdp-modal-option-r");if(p.length<=0)return void o.cdpNotification("warning",cdpModalJS.strRowCopyTryAgain);let a=o(".cdp-modal-input-profiles-r").val();d.custom={},d.times=o(".cdp-modal-input-times").val(),d.swap="2"==o(".cdp-swap").val()?"true":"false",d.profile=a,o(".cdp-multiple-sites-selector").is(":hidden")?d.site=o(".cdp-multi-site-at-once-selector select").val():d.site=o('.cdp-input-dynamic[name="tooltip-which-site-second-modal"]').val();let s=["clear","alloptions","custom","custom_named","null","undefined",null,void 0];if(a&&!s.includes(a)&&(t=a),!d.profile){if(!t||s.includes(t))return o.cdpNotification("warning",cdpModalJS.strSettCopyIssue),void n();d.profile=t}for(let t=0;t<l.length;++t)d.custom[o(l[t]).attr("name")]=o(l[t]).is(":checked");setTimeout(()=>{let t=o.cdptipster.instances();for(instance in t)t[instance].close()},10),function(t=(()=>{})){window.onbeforeunload=(()=>cdpModalJS.strCopyInProgress),$e=o(".cdp-copy-loader-overlay"),$e.is(":hidden")&&($e.show(),$e.animate({opacity:1},300,function(){t(!0)}))}(()=>{o.ajax({type:"POST",url:ajaxurl,data:{action:"cdp_action_handling",token:"cdp",f:"copy_post",nonce:cdpGlobalJS.ajaxNonce,origin:"modal",id:p,data:d},timeout:0}).done(function(t){o.isJsonString(t)&&(t=o.cdpParse(t));"error"==t.status?o.cdpNotification("error",cdpModalJS.strPostCopyIssue):(n(),e==i[2]||t.link&&t.link.length>0?"pConv"==t.link?(o.post(ajaxurl,{action:"cdp_action_handling",nonce:cdpGlobalJS.ajaxNonce,token:"cdp",f:"delete_success_img"}),"-28"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"32px",opacity:1},300),setTimeout(()=>{"32"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"-28px",opacity:0},300)},3e3),o.cdpModalClose("cdp-copy-modal-global")):window.location.href=t.link:"undefined"==typeof pagenow||"post"==pagenow||"page"==pagenow?(o.post(ajaxurl,{action:"cdp_action_handling",nonce:cdpGlobalJS.ajaxNonce,token:"cdp",f:"delete_success_img"}),"-28"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"32px",opacity:1},300),setTimeout(()=>{"32"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"-28px",opacity:0},300)},3e3),o("#cdp_notice_error_modal").length>0&&(o("#cdp_notice_error_modal").show(),o("#cdp_notice_error_modal").fadeIn(300),o("#cdp_notice_error_modal").animate({opacity:1},500),o("#cdp_notice_error_modal .cdp_notice_content").animate({opacity:1,top:"50%"},500)),o.cdpModalClose("cdp-copy-modal-global")):location.reload())}).fail(function(t){o.cdpNotification("error",cdpModalJS.strPostCopyIssueConsoleInfo),n(),console.log(t),console.log(t.responseText)})})}else o.cdpNotification(cdpModalJS.strRecogBtnIssue)}),o("body").on("click",".cdp-modal-copy-times-content .cdp-multiple-sites-selector",function(){o(".cdp-modal-copy-times-content .cdp-modal-select-2").fadeOut(300),o(".cdp-modal-copy-times-content .cdp-multiple-sites-selector").hide(300),o(".cdp-modal-copy-times-content .cdp-multi-site-at-once-selector").show(300)}),o("body").on("change","select.cdp-modal-input-profiles-r",function(){let e=["clear","alloptions","custom","custom_named","null","undefined",null,void 0];o(this).val()&&!e.includes(o(this).val())&&(t=o(this).val())}),o("#posts-filter").on("submit",function(t){"cdp_bulk_copy"==o("#bulk-action-selector-top").val()&&(t.preventDefault(),$ids=c(),$ids.length<=0?o.cdpNotification("warning",cdpModalJS.strRowCopyIssue):e())})});